(this["webpackJsonpreact-all-apps"]=this["webpackJsonpreact-all-apps"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(5),c=n.n(o),u=n(6),i=n(2),s=function(t){var e=t.note,n=t.toggleImportance,r=e.important?"make not important":"make important";return a.a.createElement("li",{className:"note"},e.content,a.a.createElement("button",{onClick:n},r))},l=n(1),f=n.n(l),p=n(3),m=function(t){var e=[t.status,t.statusText],n=e[1],r="Request failed with status code ".concat(e[0]," (").concat(n,")");throw new Error(r)},h={get:function(){var t=Object(p.a)(f.a.mark((function t(e){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return(n=t.sent).ok||m(n),t.next=6,n.json();case 6:return r=t.sent,t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),post:function(){var t=Object(p.a)(f.a.mark((function t(e,n){var r,a,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)},t.next=3,fetch(e,r);case 3:return a=t.sent,console.log(a),a.ok||m(a),t.next=8,a.json();case 8:return o=t.sent,t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),put:function(){var t=Object(p.a)(f.a.mark((function t(e,n){var r,a,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"PUT",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(n)},t.next=3,fetch(e,r);case 3:return(a=t.sent).ok||m(a),t.next=7,a.json();case 7:return o=t.sent,t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},v=function(){return h.get("/api/notes")},d=function(t){return h.post("/api/notes",t)},b=function(t,e){return h.put("".concat("/api/notes","/").concat(t),e)},E=function(t){var e=t.message;return null===e?null:a.a.createElement("div",{className:"error"},e)},g=function(){return a.a.createElement("div",{style:{color:"green",fontStyle:"italic",fontSize:16}},a.a.createElement("br",null),a.a.createElement("em",null,"Note app, Department of Computer Science, University of Helsinki 2020"))},j=function(){var t=Object(r.useState)([]),e=Object(i.a)(t,2),n=e[0],o=e[1],c=Object(r.useState)(""),l=Object(i.a)(c,2),f=l[0],p=l[1],m=Object(r.useState)(!0),h=Object(i.a)(m,2),j=h[0],O=h[1],y=Object(r.useState)(null),k=Object(i.a)(y,2),w=k[0],S=k[1];Object(r.useEffect)((function(){v().then((function(t){o(t)})).catch((function(t){var e=t.response.data.error;S(e)}))}),[]);var x=j?n:n.filter((function(t){return t.important}));return a.a.createElement("div",null,a.a.createElement("h1",null,"Notes"),a.a.createElement(E,{message:w}),a.a.createElement("div",null,a.a.createElement("button",{onClick:function(){return O(!j)}},"show ",j?"important":"all")),a.a.createElement("ul",null,x.map((function(t,e){return a.a.createElement(s,{key:e,note:t,toggleImportance:function(){return function(t){var e=n.find((function(e){return e.id===t})),r=Object(u.a)({},e,{important:!e.important});b(t,r).then((function(e){o(n.map((function(n){return n.id!==t?n:e})))})).catch((function(r){console.error(r),S("Note '".concat(e.content,"' was already removed from server")),setTimeout((function(){S(null)}),5e3),o(n.filter((function(e){return e.id!==t})))}))}(t.id)}})}))),a.a.createElement("form",{onSubmit:function(t){t.preventDefault();var e={content:f,date:(new Date).toISOString(),important:Math.random()<.5};d(e).then((function(t){console.log("@@@@",t),o(n.concat(t)),p("")})).catch((function(t){console.log("****",t),S(t)})),p("")}},a.a.createElement("input",{value:f,onChange:function(t){p(t.target.value)}}),a.a.createElement("button",{type:"submit"},"save")),a.a.createElement(g,null))};n(13);c.a.render(a.a.createElement(j,null),document.getElementById("root"))},7:function(t,e,n){t.exports=n(14)}},[[7,1,2]]]);
//# sourceMappingURL=main.d539f5b3.chunk.js.map